{"version":3,"sources":["assets/logo.svg","../node_modules/colors/lib sync","utils/math.tsx","components/automaton-designer/node/node.tsx","components/automaton-designer/helpers.tsx","components/automaton-designer/edge/edge.tsx","components/automaton-designer/automaton-designer.tsx","components/automaton-designer/help/help.tsx","components/automaton-designer/examples.tsx","components/automaton-designer/index.tsx","routes/automaton/index.tsx","routes/automaton/automaton.tsx","routes/practice/practice.tsx","routes/practice/index.tsx","components/test-words/test-words.tsx","components/test-words/index.tsx","components/automaton-viewer/automaton-viewer.tsx","routes/regular-language/regular-language.tsx","components/automaton-viewer/index.tsx","components/regular-expression/regular-expression.tsx","components/regular-expression/index.tsx","routes/regular-language/examples.tsx","routes/regular-language/index.tsx","components/app/app.tsx","components/app/index.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","__webpack_require__","p","webpackEmptyContext","req","e","Error","code","keys","resolve","id","fixed","number","toFixed","replace","midpoint","start","end","x","y","angleOfLine","offsetAngle","arguments","length","undefined","angle","Math","atan2","PI","closestPointOnCircle","circle","point","dx","cx","dy","cy","scale","sqrt","r","Attributes","Node","_ref","automaton","state","selected","dragging","current","position","statePositions","get","translate","concat","isAccepting","noam","fsm","isAcceptingState","isInitial","initialState","nodeClass","classNames","node","accept","initialStateArrow","xOffset","react_default","a","createElement","points","ACCEPTED_RADIUS","className","transform","data-state","NODE_RADIUS","isSVGGElement","element","SVGElement","tagName","getMousePosition","offset","CTM","currentTarget","getScreenCTM","clientX","clientY","f","d","getStateFromElement","classList","contains","dataset","parentElement","getTransitionFromElement","from","to","symbol","getStatePosition","NodeAttrs","setAcceptingState","accepting","addAcceptingState","acceptingStates","filter","updateTransitions","transition","newSymbol","newArr","split","Boolean","oldArr","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","alphabet","includes","addSymbol","addTransition","transitionPositions","Map","err","return","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","index","transitions","fromState","toStates","splice","s","updateTransitionPositions","fromPos","set","b","toPos","parallel","perpendicular","abs","getStateRadius","lineto","arc","radius","startAngle","endAngle","startX","cos","startY","sin","endX","endY","useGreaterThan180","generateCurvedEdge","fromRadius","toRadius","transitionPosition","mpoint","anchor","p1","p2","p3","eqn","c","g","h","i","bx","by","circleFromThreePoints","isReversed","reverseScale","path","arrow","edge_EdgeArrow","label","edge_EdgeLabel","text","ObjectType","DraggingMode","Edge","_ref2","result","toState","mousePosition","tPositions","circleX","circleY","circleRadius","generateSelfEdge","generateStraigthEdge","edgeClass","edge","linking","dataProps","data-from","data-to","data-symbol","Object","assign","join","EdgeArrow","_ref3","commands","push","EdgeLabel","_ref4","adjustX","adjustY","slide","pow","round","Help","open","actions","Fragment","popover","placement","title","defaultVisible","overlayClassName","content","Array","slicedToArray","action","hint","key","icon","type","Examples","testWord","states","canRunAutomaton","nextSymbol","db","nextSymbolIndex","currentStates","makeTransition","iteratingUntilEnd","isWordInLanguage","word","isStringInLanguage","_unused","AutomatonDesigner","onUpdate","_useState","useState","_useState2","selectedObject","setSelectedObject","_useState3","_useState4","draggingMode","setDraggingMode","_useState5","_useState6","draggingOffset","setDraggingOffset","_useState7","_useState8","mouseLocation","setMouseLocation","_useState9","_useState10","debuggingMode","setDebuggingMode","_useState11","_useState12","setTestWord","linkingEdge","NODE","LINKING","edge_Edge","resetDebuggingHandler","computeEpsilonClosure","resetAutomaton","useEffect","intervalId","window","setInterval","clearInterval","dropdown","trigger","disabled","overlay","menu_default","onClick","click","startsWith","Number","clone","SubMenu_default","map","v","Item","es_button","symbolClass","consumed","input","placeholder","suffix","style","display","onChange","target","tooltip","readString","substring","previousSymbol","lib_esm","keyName","onKeyUp","shortcut","handle","delete","t","removeState","EDGE","_key$split","_key$split2","removeTransition","onDoubleClick","prompt","nextState","reduce","acc","max","parseInt","substr","getNextState","addState","setInitialState","onMouseDown","currentPosition","shiftKey","DRAGGING","statePosition","onMouseUp","onMouseLeave","onMouseMove","_selectedObject$key$s","_selectedObject$key$s2","node_Node","unpacked","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","item","symbols","values","groupByTransitions","edgeKey","sort","help_Help","Automaton","makeNew","setAutomaton","layout","components_automaton_designer","questions","quizTitle","quizSynopsis","question","questionType","answerSelectionType","answers","correctAnswer","messageForCorrectAnswer","messageForIncorrectAnswer","explanation","Practice","Quiz_default","quiz","shuffle","showInstantFeedback","renderResultsHTML","words","expected","results","isValidAutomaton","str","strState","TestWords","testAccept","testType","toLowerCase","dangerouslySetInnerHTML","__html","TextArea","rows","ExpressionMenuOp","AutomatonViewer","automatonParent","useRef","useMemo","Viz","Module","render","renderSVGElement","printDotFormat","then","svgElement","firstChild","removeChild","appendChild","catch","error","console","renderAutomaton","ref","Title","Content","ExpressionHelp","color","expression","acceptWords","rejectWords","RegularLanguage","setExpression","setAcceptWords","setRejectWords","_useMemo","convertStatesToNumbers","minimize","convertNfaToDfa","convertEnfaToNfa","re","string","toAutomaton","name","generateAutomaton","_useMemo2","menu","RANDOM","simplify","random","SIMPLIFY","size","prefix","message","event","components_test_words","components_automaton_viewer","Header","Layout","Sider","ReactGA","initialize","testMode","process","withTracker","WrappedComponent","options","trackPage","page","_objectSpread","pageview","props","location","pathname","SiderWithRouter","withRouter","width","theme","selectedKeys","react_router_dom","App","src","logo","alt","href","app_Content","react_router","exact","component","hostname","match","ReactDOM","components_app","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.acfaf929.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logo.5d5d9eef.svg\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 151;","export type Point = {\n  readonly x: number;\n  readonly y: number;\n}\n\nexport type Circle = {\n  readonly cx: number;\n  readonly cy: number;\n  readonly r: number;\n}\n\n/**\n * Return a number with 2 digits precision on the fraction part.\n *\n * @param number\n */\nexport function fixed(number: number): string {\n  return number.toFixed(2).replace(/0+$/, '').replace(/\\.$/, '');\n}\n\n/**\n * Return the midpoint between two points.\n *\n * @param start\n * @param end\n */\nexport function midpoint(start: Point, end: Point): Point {\n  return {\n    x: (start.x + end.x) / 2,\n    y: (start.y + end.y) / 2,\n  };\n}\n\n/**\n * Return the angle (in radians) of the line defined by two points and the horizontal axis.\n *\n * @param start\n * @param end\n * @param offsetAngle\n */\nexport function angleOfLine(start: Point, end: Point, offsetAngle = 0): number {\n  let angle = Math.atan2(end.y - start.y, end.x - start.x) + offsetAngle;\n  if (angle < -Math.PI) {\n    angle += 2 * Math.PI;\n  }\n\n  if (angle > Math.PI) {\n    angle -= 2 * Math.PI;\n  }\n  return angle;\n}\n\n\n/**\n * Return the point within a circle that is closest to the specific point.\n *\n * @param circle\n * @param point\n */\nexport function closestPointOnCircle(circle: Circle, point: Point): Point {\n  const dx = point.x - circle.cx;\n  const dy = point.y - circle.cy;\n  const scale = Math.sqrt(dx * dx + dy * dy);\n\n  return {\n    x: circle.cx + dx * circle.r / scale,\n    y: circle.cy + dy * circle.r / scale,\n  };\n}\n\n/**\n * Return the circle where three points lie on it.\n * \n * See https://www.geeksforgeeks.org/equation-of-circle-when-three-points-on-the-circle-are-given/\n * See https://github.com/evanw/fsm/blob/master/src/main/math.js\n * \n * @param p1 \n * @param p2 \n * @param p3 \n */\nexport function circleFromThreePoints(p1: Point, p2: Point, p3: Point): Circle {\n\n  function eqn(a: number, b: number, c: number, d: number, e: number, f: number, g: number, h: number, i: number) {\n    return a * e * i + b * f * g + c * d * h - a * f * h - b * d * i - c * e * g;\n  }\n\n  const a = eqn(p1.x, p1.y, 1, p2.x, p2.y, 1, p3.x, p3.y, 1);\n  const bx = -eqn(p1.x * p1.x + p1.y * p1.y, p1.y, 1, p2.x * p2.x + p2.y * p2.y, p2.y, 1, p3.x * p3.x + p3.y * p3.y, p3.y, 1);\n  const by = eqn(p1.x * p1.x + p1.y * p1.y, p1.x, 1, p2.x * p2.x + p2.y * p2.y, p2.x, 1, p3.x * p3.x + p3.y * p3.y, p3.x, 1);\n  const c = -eqn(p1.x * p1.x + p1.y * p1.y, p1.x, p1.y, p2.x * p2.x + p2.y * p2.y, p2.x, p2.y, p3.x * p3.x + p3.y * p3.y, p3.x, p3.y);\n\n  return {\n    cx: -bx / (2 * a),\n    cy: -by / (2 * a),\n    r: Math.sqrt(bx * bx + by * by - 4 * a * c) / (2 * Math.abs(a))\n  };\n}","import React from 'react';\nimport classNames from 'classnames';\nimport noam from 'noam';\n\nimport { Point, fixed } from '../../../utils/math';\n\nimport './node.css';\n\nexport enum Attributes {\n  ACCEPTED_RADIUS = 22,\n  NODE_RADIUS = 18,\n}\n\nexport const Node: React.FC<{\n  automaton: any;\n  state: string;\n  selected: boolean;\n  dragging: boolean;\n  current: boolean;\n}> = ({\n  automaton, state, selected, dragging, current,\n}) => {\n    const position: Point = automaton.statePositions.get(state);\n    const translate = `translate(${fixed(position.x)},${fixed(position.y)})`;\n\n    const isAccepting: boolean = noam.fsm.isAcceptingState(automaton, state);\n    const isInitial: boolean = (automaton.initialState === state);\n\n    const nodeClass = classNames({\n      node: true,\n      dragging,\n      selected,\n      accept: noam.fsm.isAcceptingState(automaton, state),\n      current,\n    });\n\n    let initialStateArrow = null;\n    if (isInitial) {\n      const xOffset = isAccepting ? -4 : 0;\n      initialStateArrow = <polyline points={`${-8 + xOffset},14 ${2 + xOffset},${Attributes.ACCEPTED_RADIUS} ${-8 + xOffset},30`} />;\n    }\n\n    return (\n      <g className={nodeClass} transform={translate} data-state={state}>\n        {initialStateArrow}\n        {isAccepting ? <circle cx={Attributes.ACCEPTED_RADIUS} cy={Attributes.ACCEPTED_RADIUS} r={Attributes.ACCEPTED_RADIUS} /> : null}\n        <circle cx={Attributes.ACCEPTED_RADIUS} cy={Attributes.ACCEPTED_RADIUS} r={Attributes.NODE_RADIUS} />\n        <text x={Attributes.ACCEPTED_RADIUS} y=\"27\">{state}</text>\n      </g>\n    );\n  };\n","import noam from 'noam';\n\nimport { Attributes as NodeAttrs } from '../automaton-designer/node/node';\nimport { Point, angleOfLine } from '../../utils/math';\n\nfunction isSVGGElement(element: Element): boolean {\n  // Can't use \"element instanceof SVGGElement\" because SVGGElement is not defined\n  // in JSDOM leading to Jest test to fail.\n  return element instanceof SVGElement && element.tagName === 'g';\n}\n\n/**\n * Returns the point within the SVG that corresponds to the mouse event.\n * \n * @param e \n * @param offset \n */\nexport function getMousePosition(e: React.MouseEvent, offset: Point = { x: 0, y: 0 }): Point {\n  const svg = e.currentTarget as SVGSVGElement;\n  const CTM = svg.getScreenCTM() as DOMMatrix;\n\n  return {\n    x: (e.clientX - CTM.e + offset.x) / CTM.a,\n    y: (e.clientY - CTM.f + offset.y) / CTM.d,\n  };\n}\n\n/**\n * Return the state corresponding to the specified element.\n * @param element \n */\nexport function getStateFromElement(element: Element): string | null {\n  if (element instanceof SVGElement && isSVGGElement(element) && element.classList.contains('node')) {\n    return (element as SVGElement).dataset.state || null;\n  } if (element.parentElement instanceof SVGElement && isSVGGElement(element.parentElement)) {\n    return getStateFromElement(element.parentElement);\n  }\n\n  return null;\n}\n\n/**\n * Return the transition corresponding to the specified element.\n * \n * @param element \n */\nexport function getTransitionFromElement(element: Element): { from: string; to: string; symbol: string } | null {\n  if (element instanceof SVGElement && isSVGGElement(element) && element.classList.contains('edge')) {\n    return {\n      from: element.dataset.from || '',\n      to: element.dataset.to || '',\n      symbol: element.dataset.symbol || '',\n    };\n  } if (element.parentElement instanceof SVGElement && isSVGGElement(element.parentElement)) {\n    return getTransitionFromElement(element.parentElement);\n  }\n  return null;\n}\n\n/**\n * Return the coordinates relative to the center Point that represents the state.\n *\n * @param automaton\n * @param state\n */\nexport function getStatePosition(automaton: any, state: string): Point {\n  const position = automaton.statePositions.get(state);\n  return {\n    x: position.x + NodeAttrs.ACCEPTED_RADIUS,\n    y: position.y + NodeAttrs.ACCEPTED_RADIUS,\n  };\n}\n\n/**\n * Return the next available state.\n * \n * @param automaton \n */\nexport function getNextState(automaton: any): string {\n  const nextState: number = automaton.states.reduce(\n    (acc: number, state: string) => Math.max(acc, parseInt(state.substr(1))), -1,\n  );\n  return `s${nextState + 1}`;\n}\n\n/**\n * Set the automaton state as accepting or not accepting.\n *\n * @param automaton\n * @param state\n * @param accepting\n */\nexport function setAcceptingState(automaton: any, state: string, accepting: boolean): void {\n  if (accepting) {\n    if (!noam.fsm.isAcceptingState(automaton, state)) {\n      noam.fsm.addAcceptingState(automaton, state);\n    }\n  } else {\n    automaton.acceptingStates = automaton.acceptingStates.filter((e: string) => e !== state);\n  }\n}\n\n/**\n * Add a state to the automaton.\n *\n * @param automaton\n * @param state\n * @param position\n */\nexport function addState(automaton: any, state: string, position: Point): void {\n  noam.fsm.addState(automaton, state);\n  if (!automaton.statePositions) {\n    automaton.statePositions = new Map<string, Point>();\n  }\n\n  automaton.statePositions.set(state, position);\n\n  if (automaton.states.length === 1) {\n    noam.fsm.setInitialState(automaton, state);\n  }\n}\n\n/**\n * Remove a state from the automaton and respective transitions.\n *\n * @param automaton\n * @param state\n */\nexport function removeState(automaton: any, state: string): void {\n  if (automaton.initialState === state) {\n    automaton.initialState = '';\n  }\n  automaton.states = automaton.states.filter((s: string) => s !== state);\n  automaton.statePositions.delete(state);\n  automaton.acceptingStates = automaton.acceptingStates.filter((s: string) => s !== state);\n  automaton.transitions.map((t: NoamAutomatonTransition) => t.toStates.filter((s: string) => s !== state));\n  automaton.transitions = automaton.transitions.filter(\n    (t: NoamAutomatonTransition) => (t.fromState !== state)\n      && t.toStates.length > 0\n      && !(t.toStates.length === 1 && t.toStates.includes(state)),\n  );\n}\n\n/**\n * Remove a transition from the automaton.\n *\n * @param automaton\n * @param key\n */\nexport function removeTransition(automaton: any, key: string): void {\n  automaton.transitionPositions.delete(key);\n\n  const [fromState, toState] = key.split('-');\n  automaton.transitions = automaton.transitions.filter(\n    (t: NoamAutomatonTransition) => !(t.fromState === fromState && t.toStates.length === 1 && t.toStates.includes(toState)),\n  );\n}\n\n/**\n * Add and remove transitions based on the current transition and new symbols.\n *\n * @param automaton\n * @param transition\n * @param newSymbol\n */\nexport function updateTransitions(\n  automaton: any,\n  transition: { from: string; to: string; symbol: string },\n  newSymbol: string,\n): any {\n  const newArr = newSymbol.split(',').filter(Boolean);\n  const oldArr = transition.symbol.split(',').filter(Boolean);\n\n  // Add transitions\n  for (const symbol of newArr) {\n    if (!automaton.alphabet.includes(symbol)) {\n      noam.fsm.addSymbol(automaton, symbol);\n    }\n\n    noam.fsm.addTransition(automaton, transition.from, [transition.to], symbol);\n\n    if (!automaton.transitionPositions) {\n      automaton.transitionPositions = new Map<string, { a: number, b: number }>();\n    }\n  }\n\n  // Remove transitions\n  for (const symbol of oldArr) {\n    if (newArr.includes(symbol)) {\n      continue;\n    }\n\n    for (const index in (automaton.transitions as NoamAutomatonTransitions)) {\n      const value = automaton.transitions[index] as NoamAutomatonTransition;\n      if (value.fromState !== transition.from || !value.toStates.includes(transition.to) || value.symbol !== symbol) {\n        continue;\n      }\n\n      if (value.toStates.length === 1) {\n        automaton.transitions.splice(index, 1);\n      } else {\n        automaton.transitions[index] = value.toStates.filter((s: string) => s !== transition.to);\n      }\n    }\n  }\n\n  return automaton;\n}\n\n/**\n * Update the transition position values.\n * \n * @param automaton \n * @param from \n * @param to \n * @param position \n */\nexport function updateTransitionPositions(\n  automaton: any,\n  from: string,\n  to: string,\n  position: Point,\n): any {\n  const fromPos = getStatePosition(automaton, from);\n\n  if (from === to) {\n    const angle = angleOfLine(fromPos, position);\n    automaton.transitionPositions.set(`${from}-${to}`, { a: angle, b: 0 });\n  } else {\n    const toPos = getStatePosition(automaton, to);\n\n    const dx = toPos.x - fromPos.x;\n    const dy = toPos.y - fromPos.y;\n    const scale = Math.sqrt(dx * dx + dy * dy);\n    const parallel = (dx * (position.x - fromPos.x) + dy * (position.y - fromPos.y)) / (scale * scale);\n    let perpendicular = (dx * (position.y - fromPos.y) - dy * (position.x - fromPos.x)) / scale;\n\n    const snapToBounds = 8\n    if (parallel > 0 && parallel < 1 && Math.abs(perpendicular) < snapToBounds) {\n      perpendicular = 0;\n    }\n\n    automaton.transitionPositions.set(`${from}-${to}`, { a: parallel, b: perpendicular });\n  }\n\n  return automaton;\n}\n\ntype NoamAutomatonTransition = { fromState: string; toStates: Array<string>; symbol: string };\ntype NoamAutomatonTransitions = Array<NoamAutomatonTransition>;\n\n/**\n * Return the transitions with a different structure suitable to dynamically generate edges.\n * \n * @param transitions \n */\nexport function groupByTransitions(transitions: NoamAutomatonTransitions):\n  Array<{ fromState: string; toState: string; symbols: Array<string> }> {\n  const unpacked = [];\n  for (const transition of transitions) {\n    for (const toState of transition.toStates) {\n      unpacked.push({\n        fromState: transition.fromState,\n        toState,\n        symbol: transition.symbol,\n      });\n    }\n  }\n\n  return Array.from(\n    unpacked.reduce((acc, t) => {\n      const key = `${t.fromState}-${t.toState}`;\n\n      const item: { fromState: string; toState: string; symbols: Array<string> } = acc.get(key) || {\n        fromState: t.fromState,\n        toState: t.toState,\n        symbols: [],\n      };\n\n      item.symbols.push(t.symbol);\n\n      return acc.set(key, item);\n    }, new Map<string, { fromState: string; toState: string; symbols: Array<string> }>()).values(),\n  );\n}\n","import React from 'react';\nimport classNames from 'classnames';\nimport noam from 'noam';\n\nimport {\n  getStatePosition,\n} from '../helpers';\nimport {\n  angleOfLine,\n  circleFromThreePoints,\n  closestPointOnCircle,\n  fixed,\n  midpoint,\n  Point,\n} from '../../../utils/math';\nimport { Attributes as NodeAttrs, Attributes } from '../node/node';\n\nimport './edge.css';\n\nfunction getStateRadius(automaton: any, state: string): number {\n  return noam.fsm.isAcceptingState(automaton, state) ? NodeAttrs.ACCEPTED_RADIUS : NodeAttrs.NODE_RADIUS;\n}\n\n/**\n * Returns the commands required to draw a line with SVG path element.\n *\n * @param from\n * @param to\n */\nfunction lineto(from: Point, to: Point): Array<string> {\n  // The \"lineto\" commands\n  // https://www.w3.org/TR/SVG/paths.html#PathDataLinetoCommands\n  return [\n    `M${fixed(from.x)},${fixed(from.y)}`, // starting point\n    `L${fixed(to.x)},${fixed(to.y)}`, // end point\n  ];\n}\n\n/**\n * Returns the commands required to draw an arc with SVG path element.\n *\n * @param x\n * @param y\n * @param radius\n * @param startAngle\n * @param endAngle\n * @param isReversed\n */\nfunction arc(\n  x: number,\n  y: number,\n  radius: number,\n  startAngle: number,\n  endAngle: number,\n  isReversed = false,\n): Array<string> {\n  if (isReversed) {\n    [startAngle, endAngle] = [endAngle, startAngle];\n  }\n\n\n  if (endAngle < startAngle) {\n    endAngle += Math.PI * 2;\n  }\n\n  const startX = x + radius * Math.cos(startAngle);\n  const startY = y + radius * Math.sin(startAngle);\n  const endX = x + radius * Math.cos(endAngle);\n  const endY = y + radius * Math.sin(endAngle);\n  const useGreaterThan180 = (Math.abs(endAngle - startAngle) > Math.PI);\n\n  // The elliptical arc curve commands\n  // https://www.w3.org/TR/SVG/paths.html#PathDataEllipticalArcCommands\n  return [\n    `M${fixed(startX)},${fixed(startY)}`, // starting point\n    `A${fixed(radius)},${fixed(radius)}`, // radii\n    '0', // perfect circle\n    useGreaterThan180 ? '1' : '0', // large-arc-flag\n    '1', // sweep-flag, arc drawn in a positive angle\n    `${fixed(endX)},${fixed(endY)}`, // end point\n  ];\n}\n\nfunction generateSelfEdge(\n  from: Point,\n  fromRadius: number,\n  transitionPosition?: { a: number, b: number },\n  mousePosition?: { x: number, y: number },\n  symbol?: string,\n): { path: Array<string>, arrow: JSX.Element, label: JSX.Element } {\n  const angle = mousePosition ? angleOfLine(from, mousePosition) : (transitionPosition ? transitionPosition.a : 0);\n\n  const circleX = from.x + 1.5 * fromRadius * Math.cos(angle);\n  const circleY = from.y + 1.5 * fromRadius * Math.sin(angle);\n  const circleRadius = 0.75 * NodeAttrs.NODE_RADIUS;\n  const startAngle = angle - Math.PI * 0.8;\n  const endAngle = angle + Math.PI * 0.8;\n  const endX = circleX + circleRadius * Math.cos(endAngle);\n  const endY = circleY + circleRadius * Math.sin(endAngle);\n\n  return {\n    path: arc(circleX, circleY, circleRadius, startAngle, endAngle, false),\n    arrow: <EdgeArrow\n      point={{ x: endX, y: endY }}\n      angle={endAngle + Math.PI * 0.4}\n    />,\n    label: <EdgeLabel\n      point={{\n        x: circleX + circleRadius * Math.cos(angle),\n        y: circleY + circleRadius * Math.sin(angle),\n      }}\n      text={symbol || ''}\n      angle={angle}\n    />\n  };\n}\n\nfunction generateStraigthEdge(\n  from: Point,\n  fromRadius: number,\n  to?: Point,\n  toRadius?: number,\n  mousePosition?: Point,\n  symbol?: string,\n): { path: Array<string>, arrow: JSX.Element, label: JSX.Element } {\n  const mpoint = mousePosition || midpoint(from, to!);\n  from = closestPointOnCircle({ cx: from.x, cy: from.y, r: fromRadius }, mpoint);\n  to = to ? closestPointOnCircle({ cx: to.x, cy: to.y, r: toRadius! }, from) : mousePosition!;\n\n  return {\n    path: lineto(from, to),\n    arrow: <EdgeArrow\n      point={to}\n      angle={Math.atan2(to.y - from.y, to.x - from.x)}\n    />,\n    label: <EdgeLabel\n      point={mpoint}\n      text={symbol || ''}\n      angle={Math.atan2(to.x - from.x, from.y - to.y)}\n    />,\n  }\n}\n\nfunction generateCurvedEdge(\n  from: Point,\n  fromRadius: number,\n  to: Point,\n  toRadius: number,\n  transitionPosition: { a: number, b: number },\n  symbol?: string,\n): { path: Array<string>, arrow: JSX.Element, label: JSX.Element } {\n  const mpoint = midpoint(from, to);\n\n  // get anchor point\n  const dx = from.x - to.x;\n  const dy = from.y - to.y;\n  const scale = Math.sqrt(dx * dx + dy * dy);\n  const anchor = {\n    x: to.x + dx * transitionPosition.a - dy * transitionPosition.b / scale,\n    y: to.y + dy * transitionPosition.a + dx * transitionPosition.b / scale\n  };\n\n  const circle = circleFromThreePoints({ x: from.x, y: from.y }, { x: to.x, y: to.y }, anchor);\n  const isReversed = (transitionPosition.b > 0);\n  const reverseScale = isReversed ? 1 : -1;\n  const startAngle = Math.atan2(from.y - circle.cy, from.x - circle.cx) - reverseScale * fromRadius / circle.r;\n  const endAngle = Math.atan2(to.y - circle.cy, to.x - circle.cx) + reverseScale * toRadius / circle.r;\n  const endX = circle.cx + circle.r * Math.cos(endAngle);\n  const endY = circle.cy + circle.r * Math.sin(endAngle);\n\n  return {\n    path: arc(circle.cx, circle.cy, circle.r, startAngle, endAngle, isReversed),\n    arrow: <EdgeArrow\n      point={{ x: endX, y: endY }}\n      angle={endAngle - reverseScale * (Math.PI / 2)}\n    />,\n    label: <EdgeLabel\n      point={mpoint}\n      text={symbol || ''}\n      angle={Math.atan2(to.x - from.x, from.y - to.y)}\n    />,\n  }\n}\n\nexport const Edge: React.FC<{\n  automaton: any;\n  fromState: string;\n  toState?: string | null;\n  symbol?: string;\n  mousePosition?: Point;\n  selected: boolean;\n  dragging: boolean;\n}> = ({\n  automaton,\n  fromState, toState, symbol, mousePosition, selected, dragging,\n}) => {\n    let result: { path: Array<string>, arrow: JSX.Element, label: JSX.Element };\n\n    let from = getStatePosition(automaton, fromState);\n    let to = toState ? getStatePosition(automaton, toState) : mousePosition!;\n    const fromRadius = getStateRadius(automaton, fromState);\n    const toRadius = toState ? getStateRadius(automaton, toState) : NodeAttrs.NODE_RADIUS;\n    const tPositions = toState && automaton.transitionPositions ? automaton.transitionPositions.get(`${fromState}-${toState}`) : null;\n\n    if (fromState === toState) {\n      result = generateSelfEdge(from, fromRadius, tPositions, mousePosition, symbol);\n    } else {\n      if (tPositions && tPositions.b !== 0) {\n        result = generateCurvedEdge(from, fromRadius, to, toRadius, tPositions, symbol);\n      } else {\n        result = generateStraigthEdge(from, fromRadius, to, toRadius, mousePosition, symbol);\n      }\n    }\n\n    const edgeClass = classNames({\n      edge: true,\n      dragging,\n      selected,\n      linking: mousePosition,\n    });\n\n    let dataProps = {};\n    if (!mousePosition) {\n      dataProps = {\n        'data-from': fromState,\n        'data-to': toState,\n        'data-symbol': symbol,\n      };\n    }\n\n    return (\n      <g className={edgeClass} {...dataProps}>\n        <path className=\"line\" d={result.path.join(' ')} />\n        {result.arrow}\n        {result.label}\n      </g>\n    );\n  };\n\nconst EdgeArrow: React.FC<{\n  point: Point;\n  angle: number;\n}> = ({ point, angle }) => {\n  const dx = Math.cos(angle);\n  const dy = Math.sin(angle);\n\n  const commands: Array<string> = [];\n  commands.push(`M${fixed(point.x)},${fixed(point.y)}`);\n  commands.push(`L${fixed(point.x - 8 * dx + 5 * dy)},${fixed(point.y - 8 * dy - 5 * dx)}`);\n  commands.push(`${fixed(point.x - 8 * dx - 5 * dy)},${fixed(point.y - 8 * dy + 5 * dx)}`);\n\n  return (\n    <path className=\"arrow\" d={commands.join(' ')} />\n  );\n};\n\nconst EdgeLabel: React.FC<{\n  point: Point;\n  text: string;\n  angle?: number;\n}> = ({ point, text, angle }) => {\n  let { x } = point;\n  let { y } = point;\n\n  if (angle !== null && angle !== undefined) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const adjustX = 5 * (cos > 0 ? 1 : -1);\n    const adjustY = (10 + 5) * (sin > 0 ? 1 : -1);\n    const slide = sin * Math.pow(Math.abs(sin), 40) * adjustX - cos * Math.pow(Math.abs(cos), 10) * adjustY;\n    x += adjustX - sin * slide;\n    y += adjustY + cos * slide;\n  }\n\n  x = Math.round(x);\n  y = Math.round(y);\n\n  return (\n    <text x={fixed(x)} y={fixed(y + 6)}>{text}</text>\n  );\n};\n","import React, { useState, useEffect } from 'react';\nimport classNames from 'classnames';\nimport Hotkeys from 'react-hot-keys';\nimport { HotkeysEvent } from 'hotkeys-js';\nimport {\n  Input, Button, Tooltip, Icon, Dropdown,\n} from 'antd';\nimport Menu, { ClickParam } from 'antd/lib/menu';\nimport SubMenu from 'antd/lib/menu/SubMenu';\nimport noam from 'noam';\nimport clone from 'clone';\n\nimport { Edge } from './edge/edge';\nimport { Node, Attributes as NodeAttrs } from './node/node';\nimport { Help } from './help/help';\nimport {\n  addState,\n  getMousePosition,\n  getNextState,\n  getStateFromElement,\n  getTransitionFromElement,\n  groupByTransitions,\n  removeState,\n  removeTransition,\n  setAcceptingState,\n  updateTransitions,\n  updateTransitionPositions,\n} from './helpers';\nimport { Examples } from './examples';\nimport { Point } from '../../utils/math';\n\nimport './automaton-designer.css';\n\ntype DebuggingMode = {\n  currentStates: Array<string>;\n  testWord: string;\n  nextSymbolIndex: number;\n  iteratingUntilEnd: boolean;\n};\n\nenum ObjectType { NODE, EDGE }\nenum DraggingMode { DRAGGING, LINKING }\n\n/**\n * Returns true if the automaton can be used to test inputs.\n * \n * @param automaton \n */\nfunction canRunAutomaton(automaton: any): boolean {\n  return automaton.states.length > 0 && automaton.initialState;\n}\n\n/**\n * Reset the automaton state to the initial state.\n * \n * @param automaton \n * @param word \n */\nfunction resetAutomaton(automaton: any, word: string): DebuggingMode {\n  return {\n    currentStates: noam.fsm.computeEpsilonClosure(automaton, [automaton.initialState]),\n    testWord: word,\n    nextSymbolIndex: 0,\n    iteratingUntilEnd: false,\n  };\n}\n\n/**\n * Applies a transition to the automaton with the previous read symbol.\n * \n * @param automaton \n * @param db \n */\nfunction previousSymbol(automaton: any, db: DebuggingMode): DebuggingMode {\n  if (db.nextSymbolIndex <= 0) {\n    return db;\n  }\n\n  return {\n    currentStates: noam.fsm.readString(automaton, db.testWord.substring(0, db.nextSymbolIndex - 1).split('')),\n    testWord: db.testWord,\n    nextSymbolIndex: db.nextSymbolIndex - 1,\n    iteratingUntilEnd: false,\n  };\n}\n\n/**\n * Applies a transition to the automaton reading the next symbol.\n * \n * @param automaton \n * @param db \n */\nfunction nextSymbol(automaton: any, db: DebuggingMode): DebuggingMode {\n  if (db.nextSymbolIndex >= db.testWord.length) {\n    return db;\n  }\n\n  return {\n    currentStates: noam.fsm.makeTransition(automaton, db.currentStates, db.testWord[db.nextSymbolIndex]),\n    testWord: db.testWord,\n    nextSymbolIndex: db.nextSymbolIndex + 1,\n    iteratingUntilEnd: db.iteratingUntilEnd,\n  };\n}\n\n/**\n * Returns true if the input word is accepted by the automaton.\n * \n * @param automaton \n * @param word \n */\nfunction isWordInLanguage(automaton: any, word: string): boolean {\n  try {\n    return noam.fsm.isStringInLanguage(automaton, word);\n  } catch {\n    return false;\n  }\n}\n\nexport const AutomatonDesigner: React.FC<{\n  automaton: any;\n  onUpdate?: (automaton: any) => void;\n}> = ({ automaton, onUpdate }) => {\n  const [selectedObject, setSelectedObject] = useState<{ type: ObjectType; key: string } | null>();\n  const [draggingMode, setDraggingMode] = useState<DraggingMode | null>();\n  const [draggingOffset, setDraggingOffset] = useState<Point>();\n  const [mouseLocation, setMouseLocation] = useState<{ position: Point; state: string | null }>({ position: { x: 0, y: 0 }, state: null });\n  const [debuggingMode, setDebuggingMode] = useState<DebuggingMode | null>();\n  const [testWord, setTestWord] = useState('');\n\n  const doubleClickHandler = (e: React.MouseEvent) => {\n    const element = e.target as Element;\n    automaton = clone(automaton, false);\n\n    const state = getStateFromElement(element);\n    if (state) {\n      setAcceptingState(automaton, state, !noam.fsm.isAcceptingState(automaton, state));\n      setSelectedObject({ type: ObjectType.NODE, key: state });\n    } else {\n      const transition = getTransitionFromElement(element);\n      if (transition) {\n        const symbol = prompt('Modify the transition symbol', transition.symbol);\n        if (symbol !== null) {\n          automaton = updateTransitions(automaton, transition, symbol || '');\n        }\n        setSelectedObject({ type: ObjectType.EDGE, key: `${transition.from}-${transition.to}` });\n      } else {\n        const nextState = getNextState(automaton);\n        addState(automaton, nextState, getMousePosition(e, { x: -NodeAttrs.ACCEPTED_RADIUS, y: -NodeAttrs.ACCEPTED_RADIUS }));\n        setSelectedObject({ type: ObjectType.NODE, key: nextState });\n      }\n    }\n\n    if (onUpdate) {\n      onUpdate(automaton);\n    }\n  };\n\n  const mouseDownHandler = (e: React.MouseEvent) => {\n    const element = e.target as Element;\n    const currentPosition = getMousePosition(e);\n\n    const state = getStateFromElement(element);\n    if (state) {\n      setSelectedObject({ type: ObjectType.NODE, key: state });\n\n      const draggingMode = e.shiftKey ? DraggingMode.LINKING : DraggingMode.DRAGGING;\n      setDraggingMode(draggingMode);\n\n      switch (draggingMode) {\n        case DraggingMode.DRAGGING:\n          const statePosition = automaton.statePositions.get(state);\n          setDraggingOffset({\n            x: statePosition.x - currentPosition.x,\n            y: statePosition.y - currentPosition.y,\n          });\n          break;\n        case DraggingMode.LINKING:\n          setMouseLocation({ position: currentPosition, state });\n          break;\n      }\n    } else {\n      const transition = getTransitionFromElement(element);\n      if (transition) {\n        setSelectedObject({ type: ObjectType.EDGE, key: `${transition.from}-${transition.to}` });\n      } else {\n        setSelectedObject(null);\n      }\n      setDraggingMode(DraggingMode.DRAGGING);\n    }\n  };\n\n  const mouseMoveHandler = (e: React.MouseEvent) => {\n    const element = e.target as Element;\n\n    switch (draggingMode) {\n      case DraggingMode.DRAGGING:\n        automaton = clone(automaton, false);\n        if (!selectedObject) {\n          return;\n        }\n\n        switch (selectedObject.type) {\n          case ObjectType.NODE:\n            automaton.statePositions.set(selectedObject.key, getMousePosition(e, draggingOffset));\n            break;\n          case ObjectType.EDGE:\n            const [fromState, toState] = selectedObject.key.split('-');\n\n            automaton = updateTransitionPositions(\n              automaton,\n              fromState,\n              toState,\n              getMousePosition(e),\n            );\n\n            break;\n        }\n\n        if (onUpdate) {\n          onUpdate(automaton);\n        }\n        break;\n\n      case DraggingMode.LINKING:\n        setMouseLocation({\n          position: getMousePosition(e),\n          state: getStateFromElement(element),\n        });\n        break;\n    }\n  };\n\n  const mouseUpHandler = (e: React.MouseEvent) => {\n    const element = e.target as Element;\n\n    if (draggingMode === DraggingMode.LINKING) {\n      const toState = getStateFromElement(element);\n\n      if (toState && selectedObject && selectedObject.type === ObjectType.NODE) {\n        const symbol = prompt('What is the transition symbol?');\n        automaton = clone(automaton, false);\n\n        automaton = updateTransitions(\n          automaton,\n          {\n            from: selectedObject.key,\n            to: toState,\n            symbol: '',\n          },\n          symbol || '',\n        );\n\n        automaton = updateTransitionPositions(\n          automaton,\n          selectedObject.key,\n          toState,\n          getMousePosition(e),\n        );\n\n        if (onUpdate) {\n          onUpdate(automaton);\n        }\n      }\n    }\n\n    setDraggingMode(null);\n  };\n\n  const mouseLeaveHandler = (e: React.MouseEvent) => {\n    setDraggingMode(null);\n  };\n\n  let linkingEdge = null;\n  if (selectedObject && selectedObject.type === ObjectType.NODE && draggingMode === DraggingMode.LINKING) {\n    linkingEdge = (\n      <Edge\n        automaton={automaton}\n        fromState={selectedObject.key}\n        toState={mouseLocation.state}\n        mousePosition={mouseLocation.position}\n        dragging={false}\n        selected={false}\n      />\n    );\n  }\n\n  const keyUpHandler = (shortcut: string, e: KeyboardEvent, handle: HotkeysEvent) => {\n    if (!selectedObject) {\n      return;\n    }\n\n    automaton = clone(automaton, false);\n    switch (shortcut) {\n      case 'delete': // Remove current element\n        setSelectedObject(null);\n        switch (selectedObject.type) {\n          case ObjectType.NODE:\n            removeState(automaton, selectedObject.key);\n            break;\n          case ObjectType.EDGE:\n            removeTransition(automaton, selectedObject.key);\n            break;\n        }\n        break;\n\n      case 'shift+a': // Set state accepting\n        if (selectedObject.type === ObjectType.NODE) {\n          setAcceptingState(automaton, selectedObject.key, !noam.fsm.isAcceptingState(automaton, selectedObject.key));\n        }\n        break;\n\n      case 'shift+i': // Set state as initial\n        if (selectedObject.type === ObjectType.NODE) {\n          automaton.initialState = selectedObject.key;\n        }\n    }\n\n    if (onUpdate) {\n      onUpdate(automaton);\n    }\n  };\n\n  const startDebuggingHandler = (e: React.MouseEvent) => {\n    resetDebuggingHandler(e);\n  };\n\n  const stopDebuggingHandler = (e: React.MouseEvent) => {\n    setDebuggingMode(null);\n  };\n\n  const resetDebuggingHandler = (e: React.MouseEvent) => {\n    setDebuggingMode(resetAutomaton(automaton, testWord));\n  };\n\n  const stepBackwardHandler = (e: React.MouseEvent) => {\n    setDebuggingMode(previousSymbol(automaton, debuggingMode!));\n  };\n\n  const stepForwardHandler = (e: React.MouseEvent) => {\n    setDebuggingMode(nextSymbol(automaton, debuggingMode!));\n  };\n\n  const fastForwardHandler = (e: React.MouseEvent) => {\n    setDebuggingMode({\n      currentStates: debuggingMode!.currentStates,\n      testWord: debuggingMode!.testWord,\n      nextSymbolIndex: debuggingMode!.nextSymbolIndex,\n      iteratingUntilEnd: true,\n    });\n  };\n\n  useEffect(() => {\n    let intervalId: number | undefined;\n\n    if (debuggingMode && debuggingMode.iteratingUntilEnd) {\n      intervalId = window.setInterval(() => setDebuggingMode(nextSymbol(automaton, debuggingMode)), 750);\n    } else if (intervalId) {\n      clearInterval(intervalId);\n    }\n\n    return () => clearInterval(intervalId);\n  }, [debuggingMode, automaton]);\n\n  const handleOptionsMenuClick = (click: ClickParam) => {\n    if (click.key.startsWith('example')) {\n      const index = Number(click.key.split('-')[1]);\n      setTestWord(Examples[index].testWord);\n      if (onUpdate) {\n        onUpdate(clone(Examples[index].automaton, false));\n      }\n    }\n  };\n\n  return (\n    <div className=\"automaton-designer\">\n      <div className=\"toolbar\">\n        <Dropdown\n          placement=\"bottomLeft\"\n          trigger={['click']}\n          disabled={Boolean(debuggingMode)}\n          overlay={(\n            <Menu onClick={handleOptionsMenuClick}>\n              <SubMenu title=\"Examples\">\n                {\n                  Examples.map((v, i) => <Menu.Item key={`example-${i}`}>{v.title}</Menu.Item>)\n                }\n              </SubMenu>\n            </Menu>\n          )}\n        >\n          <Button icon=\"menu\" />\n        </Dropdown>\n\n        {debuggingMode\n          ? (\n            <span className=\"ant-input-affix-wrapper debugging-symbols\">\n              {\n                debuggingMode.testWord.split('').map((symbol, index) => {\n                  const symbolClass = classNames({\n                    consumed: index < debuggingMode.nextSymbolIndex,\n                    current: index === debuggingMode.nextSymbolIndex,\n                  });\n\n                  return <span key={index} className={symbolClass}>{symbol}</span>;\n                })\n              }\n            </span>\n          )\n          : (\n            <Input\n              placeholder=\"Write your test word\"\n              disabled={debuggingMode != null}\n              value={testWord}\n              suffix={(\n                <Icon\n                  type={testWord && isWordInLanguage(automaton, testWord) ? 'check' : 'close'}\n                  style={{ display: (!testWord ? 'none' : 'inherit') }}\n                />\n              )}\n              onChange={(e) => setTestWord(e.target.value)}\n            />\n          )}\n\n        <Tooltip title=\"Start debugging\">\n          {debuggingMode\n            ? <Button icon=\"stop\" onClick={stopDebuggingHandler} />\n            : <Button icon=\"bug\" disabled={!canRunAutomaton(automaton)} onClick={startDebuggingHandler} />}\n        </Tooltip>\n\n        <Tooltip title=\"Reset the automaton and go back to the beginning of the input sequence\">\n          <Button icon=\"fast-backward\" disabled={!debuggingMode} onClick={resetDebuggingHandler} />\n        </Tooltip>\n\n        <Tooltip title=\"Go back one symbol\">\n          <Button icon=\"step-backward\" disabled={!debuggingMode} onClick={stepBackwardHandler} />\n        </Tooltip>\n\n        <Tooltip title=\"Consume the next input symbol in the sequence\">\n          <Button icon=\"step-forward\" disabled={!debuggingMode} onClick={stepForwardHandler} />\n        </Tooltip>\n\n        <Tooltip title=\"Consume all remaining input symbols\">\n          <Button icon=\"fast-forward\" disabled={!debuggingMode} onClick={fastForwardHandler} />\n        </Tooltip>\n      </div>\n\n      <div className=\"container\">\n        <Hotkeys\n          keyName=\"delete,shift+a,shift+i\"\n          onKeyUp={keyUpHandler}\n        >\n          <svg\n            onDoubleClick={doubleClickHandler}\n            onMouseDown={mouseDownHandler}\n            onMouseUp={mouseUpHandler}\n            onMouseLeave={mouseLeaveHandler}\n            onMouseMove={mouseMoveHandler}\n          >\n            {(automaton.states as Array<string>).map(\n              (s) => (\n                <Node\n                  key={s}\n                  automaton={automaton}\n                  state={s}\n                  selected={Boolean(selectedObject && selectedObject.type === ObjectType.NODE && selectedObject.key === s)}\n                  dragging={Boolean(selectedObject && selectedObject.type === ObjectType.NODE && selectedObject.key === s && draggingMode === DraggingMode.DRAGGING)}\n                  current={Boolean(debuggingMode && debuggingMode.currentStates.includes(s))}\n                />\n              ),\n            )}\n            {groupByTransitions(automaton.transitions).map(\n              (t) => {\n                const edgeKey = `${t.fromState}-${t.toState}`;\n                return (\n                  <Edge\n                    key={edgeKey}\n                    automaton={automaton}\n                    fromState={t.fromState}\n                    toState={t.toState}\n                    symbol={t.symbols.sort().join(',')}\n                    dragging={Boolean(selectedObject && selectedObject.type === ObjectType.EDGE && selectedObject.key === edgeKey && draggingMode === DraggingMode.DRAGGING)}\n                    selected={Boolean(selectedObject && selectedObject.type === ObjectType.EDGE && selectedObject.key === edgeKey)}\n                  />\n                );\n              },\n            )}\n            {linkingEdge}\n          </svg>\n        </Hotkeys>\n        <Help open={!automaton || !automaton.states || automaton.states.length === 0} />\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Icon, Popover } from 'antd';\n\nimport './help.css';\n\nexport const Help: React.FC<{\n    open: boolean;\n}> = ({ open }) => {\n  const actions: Map<string, JSX.Element> = new Map([\n    ['Add a state', <>\n      <kbd>🖰 double click</kbd>\n      {' '}\non empty canvas\n    </>],\n    ['Toggle accept state', <>\n      <kbd>🖰 double click</kbd>\n      {' '}\nor\n      {' '}\n      <kbd>\n        <kbd>shift</kbd>\n        {' '}\n+\n        {' '}\n        <kbd>a</kbd>\n      </kbd>\n                            </>],\n    ['Mark state as initial', <>\n      <kbd>\n        <kbd>shift</kbd>\n        {' '}\n+\n        {' '}\n        <kbd>i</kbd>\n      </kbd>\n    </>],\n    ['Move a state', <>\n      <kbd>🖰 click</kbd>\n      {' '}\nand drag\n    </>],\n    ['Add a transition', <>\n      <kbd>\n        <kbd>shift</kbd>\n        {' '}\n+\n        {' '}\n        <kbd>🖰 click</kbd>\n      </kbd>\n      {' '}\nand drag\n    </>],\n    ['Delete a state or transition', <><kbd>delete</kbd></>],\n    ['Update a transition symbol', <><kbd>🖰 double click</kbd></>],\n  ]);\n\n  return (\n    <Popover\n      placement=\"rightTop\"\n      title=\"How to use the automaton designer?\"\n      defaultVisible={open}\n      overlayClassName=\"automaton-designer-help\"\n      content={(\n        <ul>\n          {\n                    Array.from(actions, ([action, hint], i) => (\n                      <li key={i}>\n                        <span className=\"action\">{action}</span>\n                        <span className=\"hint\">{hint}</span>\n                      </li>\n                    ))\n                }\n        </ul>\n)}\n    >\n      <Icon type=\"question-circle\" />\n    </Popover>\n  );\n};\n","type NoamAutomaton = {\n  states: Array<string>;\n  alphabet: Array<string>;\n  acceptingStates: Array<string>;\n  initialState: string;\n  transitions: Array<{\n    fromState: string;\n    toStates: Array<string>;\n    symbol: string;\n  }>;\n  statePositions: Map<string, {\n    x: number; y: number;\n  }>;\n  transitionPositions: Map<string, { a: number, b: number }>;\n}\n\ntype AutomatonExample = {\n  title: string;\n  testWord: string;\n  automaton: NoamAutomaton;\n}\n\nexport const Examples: Array<AutomatonExample> = [\n  {\n    title: 'one or more \"ab\"',\n    testWord: 'ababab',\n    automaton:\n    {\n      states: [\n        's0',\n        's1',\n        's2',\n      ],\n      alphabet: [\n        'a',\n        'b',\n      ],\n      acceptingStates: [\n        's2',\n      ],\n      initialState: 's0',\n      transitions: [\n        {\n          fromState: 's0',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's1',\n          toStates: [\n            's2',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's2',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n      ],\n      statePositions: new Map([\n        ['s0', { x: 60, y: 60 }],\n        ['s1', { x: 180, y: 60 }],\n        ['s2', { x: 340, y: 60 }],\n      ]),\n      transitionPositions: new Map([\n      ]),\n    },\n  },\n  {\n    title: 'strictly alternating a\\'s and b\\'s',\n    testWord: 'abababababababab',\n    automaton:\n    {\n      states: [\n        's0',\n        's1',\n        's2',\n      ],\n      alphabet: [\n        'a',\n        'b',\n      ],\n      acceptingStates: [\n        's0',\n        's1',\n        's2',\n      ],\n      initialState: 's0',\n      transitions: [\n        {\n          fromState: 's0',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's0',\n          toStates: [\n            's2',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's1',\n          toStates: [\n            's2',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's2',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n      ],\n      statePositions: new Map([\n        ['s0', { x: 60, y: 60 }],\n        ['s1', { x: 200, y: 180 }],\n        ['s2', { x: 340, y: 60 }],\n      ]),\n      transitionPositions: new Map([\n      ]),\n    },\n  },\n  {\n    title: 'begin with \"aba\" and end with \"bb\"',\n    testWord: 'ababbababb',\n    automaton:\n    {\n      states: [\n        's0',\n        's1',\n        's2',\n        's3',\n        's4',\n        's5',\n      ],\n      alphabet: [\n        'a',\n        'b',\n      ],\n      acceptingStates: [\n        's5',\n      ],\n      initialState: 's0',\n      transitions: [\n        {\n          fromState: 's3',\n          toStates: [\n            's3',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's3',\n          toStates: [\n            's4',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's5',\n          toStates: [\n            's5',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's4',\n          toStates: [\n            's3',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's0',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's1',\n          toStates: [\n            's2',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's4',\n          toStates: [\n            's5',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's5',\n          toStates: [\n            's3',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's2',\n          toStates: [\n            's3',\n          ],\n          symbol: 'a',\n        },\n      ],\n      statePositions: new Map([\n        ['s0', { x: 86, y: 145 }],\n        ['s1', { x: 165, y: 80 }],\n        ['s2', { x: 235, y: 145 }],\n        ['s3', { x: 311, y: 80 }],\n        ['s4', { x: 396, y: 145 }],\n        ['s5', { x: 311, y: 231 }],\n      ]),\n      transitionPositions: new Map([\n        ['s3-s3', { a: -1.6, b: 0 }],\n        ['s5-s5', { a: 1.6, b: 0 }],\n      ]),\n    },\n  },\n  {\n    title: 'even number of a\\'s and odd number of b\\'s',\n    testWord: 'aababab',\n    automaton:\n    {\n      states: [\n        's0',\n        's1',\n        's2',\n        's3',\n      ],\n      alphabet: [\n        'a',\n        'b',\n      ],\n      acceptingStates: [\n        's2',\n      ],\n      initialState: 's0',\n      transitions: [\n        {\n          fromState: 's1',\n          toStates: [\n            's3',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's3',\n          toStates: [\n            's1',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's0',\n          toStates: [\n            's2',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's2',\n          toStates: [\n            's0',\n          ],\n          symbol: 'b',\n        },\n        {\n          fromState: 's2',\n          toStates: [\n            's3',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's3',\n          toStates: [\n            's2',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's0',\n          toStates: [\n            's1',\n          ],\n          symbol: 'a',\n        },\n        {\n          fromState: 's1',\n          toStates: [\n            's0',\n          ],\n          symbol: 'a',\n        },\n      ],\n      statePositions: new Map([\n        ['s0', { x: 140, y: 80 }],\n        ['s1', { x: 300, y: 80 }],\n        ['s2', { x: 200, y: 220 }],\n        ['s3', { x: 360, y: 220 }],\n      ]),\n      transitionPositions: new Map([\n      ]),\n    },\n  },\n];\n","import { AutomatonDesigner } from './automaton-designer';\n\nexport default AutomatonDesigner;\n","import { Automaton } from './automaton';\n\nexport default Automaton;\n","import React, { useState } from 'react';\nimport { Layout } from 'antd';\nimport noam from 'noam';\n\nimport AutomatonDesigner from '../../components/automaton-designer';\n\nimport './automaton.css';\n\nexport const Automaton: React.FC = () => {\n  const [automaton, setAutomaton] = useState(noam.fsm.makeNew);\n\n  return (\n    <Layout>\n      <AutomatonDesigner automaton={automaton} onUpdate={(automaton) => setAutomaton(automaton)} />\n    </Layout>\n  );\n};\n","import React from 'react';\nimport { Layout } from 'antd';\nimport Quiz from 'react-quiz-component';\n\nimport './practice.css';\n\n/**\n * Questions have been obtained from https://www.geeksforgeeks.org/regular-languages-and-finite-automata-gq/\n */\nconst questions = {\n  quizTitle: \"Let's practice regular language and automata\",\n  quizSynopsis: 'A small set of practice questions about regular language and automata...',\n  questions: [\n    {\n      question: 'Given the language `L={ab,aa,baa}` which of the following strings are in `L*`?',\n      questionType: 'text',\n      answerSelectionType: 'multiple',\n      answers: [\n        'abaabaaabaa',\n        'aaaabaaaa',\n        'baaaaabaaaab',\n        'baaaaabaa',\n      ],\n      correctAnswer: [1, 2, 4],\n      messageForCorrectAnswer: 'Correct answer.',\n      messageForIncorrectAnswer: 'Incorrect answer.',\n      explanation: [\n        'Any combination of strings in set {ab, aa, baa} will be in L*. ',\n        '\"abaabaaabaa\" can be partitioned as \"ab aa baa ab aa\", ',\n        '\"aaaabaaaa\" as \"aa ab aa aa\", and ',\n        '\"baaaaabaa\" as \"baa aa ab aa\".',\n      ],\n      point: '1',\n    },\n    {\n      question: 'The definition of a language `L` with alphabet `{a}` is given as following `L={a^nk| k>0, and n is a positive integer constant}`.\\nWhat is the minimum number of states needed in DFA to recognize L?',\n      questionType: 'text',\n      answerSelectionType: 'single',\n      answers: [\n        'k + 1',\n        'n + 1',\n        '2^(n + 1)',\n        '2^(k + 1)',\n      ],\n      correctAnswer: '2',\n      messageForCorrectAnswer: 'Correct answer.',\n      messageForIncorrectAnswer: 'Incorrect answer.',\n      explanation: [\n        'Note that n is a constant and k is any positive integer. ',\n        'For example, if n is given as 3, then the DFA must be able to accept 3a, 6a, 9a, 12a, etc ',\n        'To build such a DFA, we need 4 states.',\n      ],\n      point: '1',\n    },\n    {\n      question: 'Let `w` be any string of length `n` is `{0,1}*`. Let `L` be the set of all substrings of `w`. What is the minimum number of states in a non-deterministic finite automaton that accepts `L`?',\n      questionType: 'text',\n      answerSelectionType: 'single',\n      answers: [\n        'n - 1',\n        'n',\n        'n + 1',\n        '2n -1',\n      ],\n      correctAnswer: '3',\n      messageForCorrectAnswer: 'Correct answer.',\n      messageForIncorrectAnswer: 'Incorrect answer.',\n      explanation: [\n        'We need minimum n + 1 states to build NFA that accepts all substrings of a binary string.',\n      ],\n      point: '1',\n    },\n    {\n      question: 'Which one of the following languages over the alphabet `{0,1}` is described by the regular expression `(0+1)*0(0+1)*0(0+1)*`?',\n      questionType: 'text',\n      answerSelectionType: 'single',\n      answers: [\n        'Set of all strings containing the substring 00',\n        \"Set of all strings containing at most two 0's\",\n        \"Set of all strings containing at least two 0's\",\n        'Set of all strings that begin and end with either 0 or 1',\n      ],\n      correctAnswer: '3',\n      messageForCorrectAnswer: 'Correct answer.',\n      messageForIncorrectAnswer: 'Incorrect answer.',\n      explanation: [\n        \"The regular expression has two 0's surrounded by (0+1)* which means accepted strings must have at least two 0′s.\",\n      ],\n      point: '1',\n    },\n    {\n      question: 'Which one of the following is FALSE?',\n      questionType: 'text',\n      answerSelectionType: 'single',\n      answers: [\n        'There is unique minimal DFA for every regular language',\n        'Every NFA can be converted to an equivalent PDA',\n        'Complement of every context-free language is recursive',\n        'Every nondeterministic PDA can be converted to an equivalent deterministic PDA',\n      ],\n      correctAnswer: '4',\n      messageForCorrectAnswer: 'Correct answer.',\n      messageForIncorrectAnswer: 'Incorrect answer.',\n      explanation: [\n        'Power of Deterministic PDA is not same as the power of Non-deterministic PDA. ',\n        'Deterministic PDA cannot handle languages or grammars with ambiguity, but NDPDA ',\n        'can handle languages with ambiguity and any context-free grammar. ',\n        'So every non-deterministic PDA can not be converted to an equivalent deterministic PDA.',\n      ],\n      point: '1',\n    },\n  ],\n};\n\n\nexport const Practice: React.FC = () =>\n\n  // TODO: improve this quiz with images, runtime generation of math formulas\n  // allow answers to be tested in real time, show the state machine, etc\n\n  (\n    <Layout>\n      <Quiz quiz={questions} shuffle={false} showInstantFeedback />\n    </Layout>\n  );\n","import { Practice } from './practice';\n\nexport default Practice;\n","import React from 'react';\nimport { Input } from 'antd';\nimport noam from 'noam';\n\nimport './test-words.css';\n\nfunction isValidAutomaton(automaton: any): boolean {\n  return automaton && automaton.transitions.length > 0;\n}\n\nfunction renderResultsHTML(automaton: any, words: Array<string>, expected: boolean): string {\n  const results: Array<string> = [];\n\n  if (!isValidAutomaton(automaton)) {\n    return '';\n  }\n\n  for (const str of words) {\n    let strState: string = expected ? 'invalid' : 'valid';\n\n    try {\n      if (noam.fsm.isStringInLanguage(automaton, str)) {\n        strState = expected ? 'valid' : 'invalid';\n      }\n    } catch {\n      //\n    }\n\n    results.push(`<span class=\"${strState}\">${str}</span>`);\n  }\n\n  return results.join('');\n}\n\nexport const TestWords: React.FC<{\n    automaton: any;\n    words: Array<string>;\n    testAccept: boolean;\n    onChange?: (words: Array<string>) => void;\n}> = ({\n  automaton, words, testAccept, onChange,\n}) => {\n  const testType: string = (testAccept ? 'Accept' : 'Reject');\n\n  return (\n    <div className={`test-words ${testType.toLowerCase()}`}>\n      <h2>{testType}</h2>\n\n      <div className=\"container\">\n        <div className=\"backdrop\">\n          <div\n            className=\"highlights\"\n            dangerouslySetInnerHTML={{\n              __html:\n                            renderResultsHTML(automaton, words, testAccept),\n            }}\n          />\n        </div>\n        <Input.TextArea\n          rows={8}\n          value={words.join('\\n')}\n          onChange={(e) => {\n            if (onChange) {\n              onChange(e.target.value.split('\\n'));\n            }\n          }}\n        />\n      </div>\n    </div>\n  );\n};\n","import { TestWords } from './test-words';\n\nexport default TestWords;\n","import React, { useMemo, useRef } from 'react';\nimport noam from 'noam';\nimport Viz from 'viz.js';\nimport { Module, render } from 'viz.js/full.render.js';\n\nimport './automaton-viewer.css';\n\nfunction isValidAutomaton(automaton: any): boolean {\n  return automaton && automaton.transitions.length > 0;\n}\n\nfunction renderAutomaton(automaton: any, automatonParent: React.RefObject<HTMLDivElement>): void {\n  if (!isValidAutomaton(automaton)) {\n    return;\n  }\n\n  (new Viz({ Module, render }))\n    .renderSVGElement(noam.fsm.printDotFormat(automaton))\n    .then((svgElement) => {\n      if (!automatonParent.current) {\n        return;\n      }\n\n      while (automatonParent.current.firstChild) {\n        automatonParent.current.removeChild(automatonParent.current.firstChild);\n      }\n\n      if (isValidAutomaton(automaton)) {\n        automatonParent.current.appendChild(svgElement);\n      }\n    })\n    .catch((error) => {\n      console.error(error);\n    });\n}\n\nexport const AutomatonViewer: React.FC<{ automaton: any }> = ({ automaton }) => {\n  const automatonParent = useRef<HTMLDivElement>(null);\n\n  // Rendering the automaton is done directly and bypass React reconciliation\n  // Avoid rendering if the automaton has not changed\n  useMemo(() => renderAutomaton(automaton, automatonParent), [automaton]);\n\n  return (\n    <div className=\"automaton-viewer-container\" ref={automatonParent} />\n  );\n};\n","import React, { useState, useMemo } from 'react';\nimport {\n  Dropdown,\n  Icon,\n  Input,\n  Layout,\n  Menu,\n  Tooltip,\n  Button,\n} from 'antd';\nimport { ClickParam } from 'antd/lib/menu';\nimport SubMenu from 'antd/lib/menu/SubMenu';\n\nimport noam from 'noam';\n\nimport TestWords from '../../components/test-words';\nimport AutomatonViewer from '../../components/automaton-viewer';\nimport ExpressionHelp from '../../components/regular-expression';\nimport { Examples } from './examples';\n\nimport './regular-language.css';\n\nfunction generateAutomaton(expression: string): any {\n  try {\n    const automaton = noam.fsm.convertStatesToNumbers(\n      noam.fsm.minimize(\n        noam.fsm.convertNfaToDfa(\n          noam.fsm.convertEnfaToNfa(\n            noam.re.string.toAutomaton(expression),\n          ),\n        ),\n      ),\n    );\n\n    return [automaton, null];\n  } catch (error) {\n    if (error.name === 'RegexError') {\n      return [null, error];\n    }\n  }\n}\n\nenum ExpressionMenuOp {\n  RANDOM = 'random',\n  SIMPLIFY = 'simplify',\n}\n\nexport const RegularLanguage: React.FC = () => {\n  const [expression, setExpression] = useState('');\n  const [acceptWords, setAcceptWords] = useState<Array<string>>([]);\n  const [rejectWords, setRejectWords] = useState<Array<string>>([]);\n\n  // Avoid generating a new automaton between renders for the same expression\n  const [automaton, error] = useMemo(() => generateAutomaton(expression), [expression]);\n\n  const handleExpressionMenuClick = (click: ClickParam) => {\n    switch (click.key) {\n      case ExpressionMenuOp.RANDOM: {\n        setExpression(\n          noam.re.string.simplify(\n            noam.re.string.random(5, 'ab', {}),\n          ),\n        );\n        break;\n      }\n      case ExpressionMenuOp.SIMPLIFY: {\n        /** TODO:\n         * write the simplify steps to the log\n         * allow debugging the simplification with step forward and explanation\n         */\n        setExpression(noam.re.string.simplify(expression));\n        break;\n      }\n    }\n\n    if (click.key.startsWith('example')) {\n      const index = Number(click.key.split('-')[1]);\n      setExpression(Examples[index].expression);\n      setAcceptWords(Examples[index].acceptWords);\n      setRejectWords(Examples[index].rejectWords);\n    }\n  };\n\n  return (\n    <Layout>\n      <h1>Expression</h1>\n      <div className=\"toolbar\">\n        <Dropdown\n          placement=\"bottomLeft\"\n          trigger={['click']}\n          overlay={(\n            <Menu onClick={handleExpressionMenuClick}>\n              <Menu.Item key={ExpressionMenuOp.RANDOM}>Generate random expression</Menu.Item>\n              <Menu.Item key={ExpressionMenuOp.SIMPLIFY}>Simplify expression</Menu.Item>\n              <SubMenu title=\"Examples\">\n                {\n                  Examples.map((v, i) => <Menu.Item key={`example-${i}`}>{v.title}</Menu.Item>)\n                }\n              </SubMenu>\n            </Menu>\n          )}\n        >\n          <Button icon=\"menu\" size=\"large\" />\n        </Dropdown>\n\n        <Input\n          size=\"large\"\n          placeholder=\"Write your regular expression\"\n          value={expression}\n          prefix={ExpressionHelp}\n          suffix={(\n            <Tooltip placement=\"topRight\" title={error ? error.message : ''}>\n              <Icon type=\"close\" style={{ color: 'red', display: (!error ? 'none' : 'inherit') }} />\n            </Tooltip>\n          )}\n          onChange={(event: React.ChangeEvent<HTMLInputElement>) => setExpression(event.target.value)}\n        />\n      </div>\n      <h1>Words</h1>\n      <TestWords automaton={automaton} words={acceptWords} testAccept onChange={(words) => setAcceptWords(words)} />\n      <TestWords automaton={automaton} words={rejectWords} testAccept={false} onChange={(words) => setRejectWords(words)} />\n      <h1>Automaton</h1>\n      <AutomatonViewer automaton={automaton} />\n    </Layout>\n  );\n};\n","import { AutomatonViewer } from './automaton-viewer';\n\nexport default AutomatonViewer;\n","import React from 'react';\nimport { Icon, Popover } from 'antd';\n\nconst Title = (\n  <span>What is a regular expression?</span>\n);\n\nconst Content = (\n  <div>\n    <p>\nA regular expression (over an alphabet Σ) is a string consisting of symbols from Σ, plus symbols from the list\n      <em>+</em>\n,\n      <em>*</em>\n,\n      <em>(</em>\n,\n      <em>)</em>\n,\n      <em>$</em>\n.\n    </p>\n    <ul>\n      <li>\n        <strong>+</strong>\n        {' '}\n(alteration operator, ∪)\n      </li>\n      <li>\n        <strong>∗</strong>\n        {' '}\n(Kleene star); 0 or more symbols\n      </li>\n      <li>\n        <strong>(</strong>\n; start grouping\n      </li>\n      <li>\n        <strong>)</strong>\n; end grouping\n      </li>\n      <li>\n        <strong>$</strong>\n        {' '}\n(epsilon, ε); empty string\n      </li>\n      <li>\n        <strong>\\</strong>\n        {' '}\n(backslash); used for escaping the special meaning of all the listed characters, including backslash itself\n      </li>\n    </ul>\n\n    <p>\nExample:\n      <code>a(a+b)*</code>\n    </p>\n    <p>\n= all words starting with a, followed by any word over\n      {'{a, b}'}\n    </p>\n    <p>\n= all words over the alphabet\n      {'{a, b}'}\n      {' '}\nstarting with a\n    </p>\n  </div>\n);\n\nexport const ExpressionHelp = (\n  <Popover\n    placement=\"rightTop\"\n    title={Title}\n    content={Content}\n  >\n    <Icon type=\"question-circle\" style={{ color: 'rgba(0,0,0,.45)' }} />\n  </Popover>\n);\n","import { ExpressionHelp } from './regular-expression';\n\nexport default ExpressionHelp;\n","type ExpressionExample = {\n    title: string;\n    expression: string;\n    acceptWords: Array<string>;\n    rejectWords: Array<string>;\n}\n\nexport const Examples: Array<ExpressionExample> = [\n  {\n    title: 'one or more \"ab\"',\n    expression: 'ab(ab)*',\n    acceptWords: [\n      'ab',\n      'abab',\n      'ababab',\n    ],\n    rejectWords: [\n      'a',\n      'b',\n      'aba',\n      'ba',\n      'bb',\n      'ababb',\n    ],\n  },\n  {\n    title: 'strictly alternating a\\'s and b\\'s',\n    expression: '(ab)*(a+$)+(ba)*(b+$)',\n    acceptWords: [\n      'a',\n      'b',\n      'ab',\n      'ba',\n      'aba',\n      'bab',\n      'abab',\n      'baba',\n    ],\n    rejectWords: [\n      'bb',\n      'aa',\n      'abba',\n    ],\n  },\n  {\n    title: 'begin with \"aba\" and end with \"bb\"',\n    expression: 'aba(a+b)*bb',\n    acceptWords: [\n      'ababb',\n      'ababb',\n      'ababbb',\n      'ababbababb',\n    ],\n    rejectWords: [\n      'aba',\n      'abab',\n      'abb',\n    ],\n  },\n  {\n    title: 'groups of 2 or more a\\'s',\n    expression: '(b+(aaa*))*',\n    acceptWords: [\n      'b',\n      'bbbb',\n      'aa',\n      'aaa',\n      'aabaaabbaa',\n      'bbaabaaabaabaaa',\n    ],\n    rejectWords: [\n      'a',\n      'aba',\n      'abba',\n      'aabaaaaba',\n    ],\n  },\n  {\n    title: 'start with \"a\" and not contain \"cb\"',\n    expression: 'a(a+b+cc*a)*(cc*+$)',\n    acceptWords: [\n      'a',\n      'ab',\n      'abc',\n      'ac',\n      'acc',\n      'accab',\n    ],\n    rejectWords: [\n      'b',\n      'c',\n      'acb',\n      'abbabcba',\n    ],\n  },\n  {\n    title: 'even number of a\\'s and odd number of b\\'s',\n    expression: '(aa+bb+abba+baab+abab+baba)*(aba+b)(aa+bb+abba+baab+abab+baba)*',\n    acceptWords: [\n      'b',\n      'aab',\n      'baa',\n      'aba',\n      'aaaba',\n      'aababab',\n    ],\n    rejectWords: [\n      'aa',\n      'abba',\n      'abbbabab',\n    ],\n  },\n];\n","import { RegularLanguage } from './regular-language';\n\nexport default RegularLanguage;\n","import React, { useEffect } from 'react';\nimport {\n  HashRouter,\n  Link,\n  Route,\n  RouteComponentProps,\n  withRouter,\n} from 'react-router-dom';\nimport ReactGA, { FieldsObject } from 'react-ga';\nimport { Layout, Menu } from 'antd';\n\nimport Automaton from '../../routes/automaton';\nimport Practice from '../../routes/practice';\nimport RegularLanguage from '../../routes/regular-language';\n\nimport logo from '../../assets/logo.svg';\n\nimport './app.css';\n\nconst { Header, Sider, Content } = Layout;\n\nReactGA.initialize('UA-50201175-2', { testMode: process.env.NODE_ENV !== 'production' });\n\nconst withTracker = <P extends RouteComponentProps>(\n  WrappedComponent: React.ComponentType<P>,\n  options: FieldsObject = {},\n) => {\n  const trackPage = (page: string) => {\n    ReactGA.set({ page, ...options });\n    ReactGA.pageview(page);\n  };\n\n  return (props: P) => {\n    useEffect(() => {\n      trackPage(props.location.pathname);\n    }, [props.location.pathname]);\n\n    return <WrappedComponent {...props} />;\n  };\n};\n\nfunction getKeyFromLocation(pathname: string): string {\n  if (pathname === '/') {\n    return 'automaton';\n  }\n\n  return pathname.substr(1);\n}\n\nconst SiderWithRouter = withRouter(({ location }) => (\n  <Sider width=\"300px\">\n    <Menu theme=\"dark\" selectedKeys={[getKeyFromLocation(location.pathname)]}>\n      <Menu.Item key=\"automaton\">\n        <Link to=\"/automaton\">Automaton</Link>\n      </Menu.Item>\n      <Menu.Item key=\"regular-language\">\n        <Link to=\"/regular-language\">Regular language</Link>\n      </Menu.Item>\n      <Menu.Item key=\"practice\">\n        <Link to=\"/practice\">Practice questions</Link>\n      </Menu.Item>\n    </Menu>\n  </Sider>\n));\n\nexport const App: React.FC = () => (\n  <HashRouter>\n    <Layout>\n      <Header>\n        <div className=\"logo\">\n          <img src={logo} className=\"icon\" alt=\"logo\" />\n          <a href=\".\">Fundamentals of Computing</a>\n        </div>\n        <div className=\"links\">\n          <a href=\"https://github.com/silvafj/focsimulation\">GitHub</a>\n          <a href=\"http://www.dcs.bbk.ac.uk/~michael/foc/foc.html\">Course</a>\n        </div>\n      </Header>\n      <SiderWithRouter />\n      <Content>\n        <Route exact path={['/', '/automaton']} component={withTracker(Automaton)} />\n        <Route exact path={['/regular-language']} component={withTracker(RegularLanguage)} />\n        <Route exact path={['/practice']} component={withTracker(Practice)} />\n      </Content>\n    </Layout>\n  </HashRouter>\n);\n","import { App } from './app';\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\ntype Config = {\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\n};\n\nexport function register(config?: Config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(\n      (process as { env: { [key: string]: string } }).env.PUBLIC_URL,\n      window.location.href\n    );\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl: string, config?: Config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/app';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}